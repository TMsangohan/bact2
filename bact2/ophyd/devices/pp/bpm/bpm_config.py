#: Data received from Thomas Birke 5. September 2019
#: Waiting for a central storage
#:
#: Data of the beam positon monitors. It is a list of tuples.
#: Each tuple contains:
#:    * `bpm name`
#:    * `x state`: boolean (?)
#:    * `y state`: boolean (?)
#:    * `ds:`       longitudinal position in the machine ds = 0 : injection point
#:    * `idx:`      index for this bpm data in bdata/packed_data
#:    * `scale x`:  fixed scaling data for converting raw data to millimeter
#:    * `scale y`:  fixed scaling data for converting raw data to millimeter
#:
bpm_conf = [
    #: BPM        X/Y-State   ds             idx    scaleX     scaleY
    ("BPMZ8T2R",    0, 0,     0,             32,      1,         1),
    ("BPMZ8T4R",    0, 0,     0,             64,      1,         1),
    ("BPMZ8D5R",    0, 0,     0,             72,      1,         1),
    ("BPMZ8T7R",    0, 0,     0,            112,      1,         1),
    ("BPMZ8D8R",    0, 0,     0,            120,      1,         1),
    # ("BPMZ43D1R",   0, 0,     1.582,         16,      1,         1),
    ("BPMZ44D1R",   0, 0,     1.785,         24,      1,         1),
    ("BPMZ5D1R",    0, 0,     2.736,          1,      1,         1),
    ("BPMZ6D1R",    1, 1,     3.995,          2,      1,         1),
    ("BPMZ7D1R",    1, 1,     6.474,          3,      1,         1),
    ("BPMZ1T1R",    1, 1,     7.675,          4,      1,         1),
    ("BPMZ2T1R",    1, 1,     8.591,          5,      1,         1),
    ("BPMZ3T1R",    1, 1,    11.005,          6,      1,         1),
    ("BPMZ4T1R",    1, 1,    12.639,          7,      1,         1),
    ("BPMZ43T1R",   0, 0,    15.9296,        56,      1,         1),
    ("BPMZ5T1R",    1, 1,    17.361,          9,      1,         1),
    ("BPMZ6T1R",    1, 1,    18.995,         10,      1,         1),
    ("BPMZ7T1R",    1, 1,    21.474,         11,      1,         1),
    ("BPMZ1D2R",    1, 1,    22.675,         12,      1,         1),
    ("BPMZ2D2R",    1, 1,    23.591,         13,      1,         1),
    ("BPMZ3D2R",    1, 1,    26.005,         14,      1,         1),
    #: Check how to scale the data for this bpm
    ("BPMZ4D2R",    1, 1,    27.264,         15,      0.3,       1),
    ("BPMZ5D2R",    1, 1,    32.736,         17,      1,         1),
    ("BPMZ6D2R",    1, 1,    33.995,         18,      1,         1),
    ("BPMZ7D2R",    1, 1,    36.474,         19,      1,         1),
    ("BPMZ1T2R",    1, 1,    37.675,         20,      1,         1),
    ("BPMZ2T2R",    1, 1,    38.591,         21,      1,         1),
    ("BPMZ3T2R",    1, 1,    41.005,         22,      1,         1),
    ("BPMZ4T2R",    1, 1,    42.639,         23,      1,         1),
    ("BPMZ5T2R",    1, 1,    47.361,         25,      1,         1),
    ("BPMZ6T2R",    1, 1,    48.995,         26,      1,         1),
    ("BPMZ7T2R",    1, 1,    51.474,         27,      1,         1),
    ("BPMZ1D3R",    1, 1,    52.675,         28,      1,         1),
    ("BPMZ2D3R",    1, 1,    53.591,         29,      1,         1),
    ("BPMZ3D3R",    1, 1,    56.005,         30,      1,         1),
    ("BPMZ4D3R",    1, 1,    57.264,         31,      1,         1),
    ("BPMZ5D3R",    1, 1,    62.736,         33,      1,         1),
    ("BPMZ6D3R",    1, 1,    63.995,         34,      1,         1),
    ("BPMZ7D3R",    1, 1,    66.474,         35,      1,         1),
    ("BPMZ1T3R",    1, 1,    67.675,         36,      1,         1),
    ("BPMZ2T3R",    0, 0,    68.591,         37,      1,         1),
    ("BPMZ3T3R",    1, 1,    71.005,         38,      1,         1),
    ("BPMZ4T3R",    1, 1,    72.639,         39,      1,         1),
    ("BPMZ41T3R",   0, 0,    74.1275,        40,      1,         1),
    ("BPMZ42T3R",   0, 0,    75.3795,        48,      1,         1),
    ("BPMZ5T3R",    1, 1,    77.361,         41,      1,         1),
    ("BPMZ6T3R",    1, 1,    78.995,         42,      1,         1),
    ("BPMZ7T3R",    1, 1,    81.474,         43,      1,         1),
    ("BPMZ1D4R",    1, 1,    82.675,         44,      1,         1),
    ("BPMZ2D4R",    1, 1,    83.591,         45,      1,         1),
    ("BPMZ3D4R",    1, 1,    86.005,         46,      1,         1),
    ("BPMZ4D4R",    1, 1,    87.264,         47,      1,         1),
    ("BPMZ5D4R",    1, 1,    92.736,         49,      1,         1),
    ("BPMZ6D4R",    1, 1,    93.995,         50,      1,         1),
    ("BPMZ7D4R",    0, 0,    96.474,         51,      1,         1),
    ("BPMZ1T4R",    1, 1,    97.675,         52,      1,         1),
    ("BPMZ2T4R",    1, 1,    98.591,         53,      1,         1),
    ("BPMZ3T4R",    1, 1,   101.005,         54,      1,         1),
    ("BPMZ4T4R",    1, 1,   102.639,         55,      1,         1),
    ("BPMZ5T4R",    1, 1,   107.361,         57,      1,         1),
    ("BPMZ6T4R",    1, 1,   108.995,         58,      1,         1),
    ("BPMZ7T4R",    1, 1,   111.474,         59,      1,         1),
    ("BPMZ1D5R",    1, 1,   112.675,         60,      1,         1),
    ("BPMZ2D5R",    1, 1,   113.591,         61,      1,         1),
    ("BPMZ3D5R",    1, 1,   116.005,         62,      1,         1),
    ("BPMZ4D5R",    1, 1,   117.6933,        63,      1,         1),
    ("BPMZ5D5R",    1, 1,   122.3067,        65,      1,         1),
    ("BPMZ6D5R",    1, 1,   123.995,         66,      1,         1),
    ("BPMZ7D5R",    1, 1,   126.474,         67,      1,         1),
    ("BPMZ1T5R",    1, 1,   127.675,         68,      1,         1),
    ("BPMZ2T5R",    1, 1,   128.591,         69,      1,         1),
    ("BPMZ3T5R",    1, 1,   131.005,         70,      1,         1),
    ("BPMZ4T5R",    1, 1,   132.639,         71,      1,         1),
    ("BPMZ5T5R",    1, 1,   137.361,         73,      1,         1),
    ("BPMZ6T5R",    1, 1,   138.995,         74,      1,         1),
    ("BPMZ7T5R",    1, 1,   141.474,         75,      1,         1),
    ("BPMZ1D6R",    1, 1,   142.675,         76,      1,         1),
    ("BPMZ2D6R",    1, 1,   143.591,         77,      1,         1),
    ("BPMZ3D6R",    1, 1,   146.005,         78,      1,         1),
    ("BPMZ4D6R",    1, 1,   147.264,         79,      1,         1),
    ("BPMZ41D6R",   0, 0,   147.72918,       80,      1,         1),
    ("BPMZ42D6R",   0, 0,   149.58046,       88,      1,         1),
    ("BPMZ43D6R",   0, 0,   150.2976,        96,      1,         1),
    ("BPMZ44D6R",   0, 0,   152.32503,      104,      1,         1),
    ("BPMZ6D6R",    1, 1,   153.995,         82,      1,         1),
    ("BPMZ7D6R",    1, 1,   156.474,         83,      1,         1),
    ("BPMZ1T6R",    1, 1,   157.675,         84,      1,         1),
    ("BPMZ2T6R",    1, 1,   158.591,         85,      1,         1),
    ("BPMZ3T6R",    1, 1,   161.005,         86,      1,         1),
    ("BPMZ4T6R",    1, 1,   162.639,         87,      1,         1),
    ("BPMZ41T6R",   1, 1,   165.000,         81,      0.2489622, 0.8050295),
    ("BPMZ5T6R",    1, 1,   167.361,         89,      1,         1),
    ("BPMZ6T6R",    1, 1,   168.995,         90,      1,         1),
    ("BPMZ7T6R",    1, 1,   171.474,         91,      1,         1),
    ("BPMZ1D7R",    1, 1,   172.675,         92,      1,         1),
    ("BPMZ2D7R",    1, 1,   173.591,         93,      1,         1),
    ("BPMZ3D7R",    1, 1,   176.005,         94,      1,         1),
    ("BPMZ4D7R",    1, 1,   177.264,         95,      1,         1),
    ("BPMZ5D7R",    1, 1,   182.736,         97,      1,         1),
    ("BPMZ6D7R",    1, 1,   183.995,         98,      1,         1),
    ("BPMZ7D7R",    1, 1,   186.474,         99,      1,         1),
    ("BPMZ1T7R",    1, 1,   187.675,        100,      1,         1),
    ("BPMZ2T7R",    1, 1,   188.591,        101,      1,         1),
    ("BPMZ3T7R",    1, 1,   191.005,        102,      1,         1),
    ("BPMZ4T7R",    1, 1,   192.639,        103,      1,         1),
    ("BPMZ5T7R",    1, 1,   197.361,        105,      1,         1),
    ("BPMZ6T7R",    1, 1,   198.995,        106,      1,         1),
    ("BPMZ7T7R",    1, 1,   201.474,        107,      1,         1),
    ("BPMZ1D8R",    1, 1,   202.675,        108,      1,         1),
    ("BPMZ2D8R",    1, 1,   203.591,        109,      1,         1),
    ("BPMZ3D8R",    1, 1,   206.005,        110,      1,         1),
    ("BPMZ4D8R",    1, 1,   207.264,        111,      1,         1),
    ("BPMZ5D8R",    1, 1,   212.736,        113,      1,         1),
    ("BPMZ6D8R",    1, 1,   213.995,        114,      1,         1),
    ("BPMZ7D8R",    1, 1,   216.474,        115,      1,         1),
    ("BPMZ1T8R",    1, 1,   217.675,        116,      1,         1),
    ("BPMZ2T8R",    1, 1,   218.591,        117,      1,         1),
    ("BPMZ3T8R",    1, 1,   221.005,        118,      1,         1),
    ("BPMZ4T8R",    1, 1,   222.639,        119,      1,         1),
    ("BPMZ5T8R",    1, 1,   227.361,        121,      1,         1),
    ("BPMZ6T8R",    1, 1,   228.995,        122,      1,         1),
    ("BPMZ7T8R",    1, 1,   231.474,        123,      1,         1),
    ("BPMZ1D1R",    1, 1,   232.675,        124,      1,         1),
    ("BPMZ2D1R",    1, 1,   233.591,        125,      1,         1),
    ("BPMZ3D1R",    1, 1,   236.005,        126,      1,         1),
    ("BPMZ4D1R",    1, 1,   237.264,        127,      1,         1),
    ("BPMZ41D1R",   0, 0,   238.215,          8,      1,         1),
    ("BPMZ42D1R",   0, 0,   238.418,        128,      1,         1)]

#: offsets of the Beam position monitors
#: in millimeter
bpm_offset = {
    "BPMZ5D1R":   (8.572389e-02,  1.305237e-01),
    "BPMZ6D1R":   (5.065918e-03,  1.847534e-01),
    "BPMZ7D1R":  (-2.597351e-01, -4.180909e-02),
    "BPMZ1T1R":  (-5.737610e-01, -5.375977e-01),
    "BPMZ2T1R":   (2.298584e-01,  6.159974e-01),
    "BPMZ3T1R":  (-1.924133e-01,  3.427124e-02),
    "BPMZ4T1R":   (7.855225e-02,  6.583558e-01),
    "BPMZ5T1R":   (2.110901e-01,  2.242432e-01),
    "BPMZ6T1R":  (-8.889771e-02, -1.785278e-02),
    "BPMZ7T1R":  (-1.879883e-01,  6.439210e-02),
    "BPMZ1D2R":  (-8.673097e-02, -6.567383e-02),
    "BPMZ2D2R":  (-4.776612e-01,  1.669312e-01),
    "BPMZ3D2R":   (1.837280e+00, -2.185059e-02),
    "BPMZ4D2R":  (-9.219361e-02, -9.320374e-01),
    "BPMZ5D2R":   (2.213135e-01, -6.683350e-03),
    "BPMZ6D2R":  (-3.485413e-01,  2.243347e-01),
    "BPMZ7D2R":   (7.864381e-02,  9.281617e-01),
    "BPMZ1T2R":  (-3.635559e-01,  3.040161e-01),
    "BPMZ2T2R":  (-1.441345e-01, -9.020997e-02),
    "BPMZ3T2R":  (-2.761231e-01,  1.039978e+00),
    "BPMZ4T2R":   (6.134034e-03,  1.979370e-01),
    "BPMZ5T2R":  (-2.450562e-01, -1.566773e-01),
    "BPMZ6T2R":  (-1.353729e+00, -3.336792e-01),
    "BPMZ7T2R":  (-6.777039e-01,  1.466675e+00),
    "BPMZ1D3R":  (-1.396485e-01,  3.710633e-01),
    "BPMZ2D3R":  (-5.334778e-01,  7.468262e-01),
    "BPMZ3D3R":   (1.851196e-01,  5.698243e-01),
    "BPMZ4D3R":  (-7.366944e-02,  1.447357e+00),
    "BPMZ5D3R":  (-2.111817e-02, -8.096314e-02),
    "BPMZ6D3R":   (1.455994e-01,  7.741700e-01),
    "BPMZ7D3R":  (-1.789246e-01,  1.286194e+00),
    "BPMZ1T3R":  (-1.168823e-02,  9.161073e-01),
    "BPMZ2T3R":  (-2.044068e-01,  9.848939e-01),
    "BPMZ3T3R":  (-7.620240e-02,  5.366211e-01),
    "BPMZ4T3R":   (9.170533e-02, -1.529846e-01),
    "BPMZ41T3R":  (0.000000e+00,  0.000000e+00),
    "BPMZ42T3R": (-3.385681e+00, -6.215821e-01),
    "BPMZ5T3R":   (4.514466e-01,  2.631836e-01),
    "BPMZ6T3R":   (2.129212e-01,  7.211915e-01),
    "BPMZ7T3R":  (-3.752442e-01,  1.543884e-01),
    "BPMZ1D4R":  (-2.127075e-01,  7.131654e-01),
    "BPMZ2D4R":   (1.662293e-01,  7.507020e-01),
    "BPMZ3D4R":   (2.343750e-02,  1.400452e-01),
    "BPMZ4D4R":  (-7.766724e-01, -5.275269e-01),
    "BPMZ5D4R":   (7.461549e-02, -1.444092e-01),
    "BPMZ6D4R":   (2.593994e-02,  3.488160e-01),
    "BPMZ7D4R":  (-4.403687e-01,  8.380128e-01),
    "BPMZ1T4R":  (2.537232e-01,  4.276123e-01),
    "BPMZ2T4R":  (-3.957215e-01,  3.467102e-01),
    "BPMZ3T4R":  (-3.501892e-01,  1.967468e-01),
    "BPMZ4T4R":   (1.244995e+00, -4.516907e-01),
    "BPMZ5T4R":   (1.890564e-01,  1.924439e-01),
    "BPMZ6T4R":  (-1.688538e-01,  9.369203e-01),
    "BPMZ7T4R":   (3.420105e-01,  3.723755e-01),
    "BPMZ1D5R":   (1.766968e-02,  3.218689e-01),
    "BPMZ2D5R":   (1.686707e-01,  2.336731e-01),
    "BPMZ3D5R":  (-1.739197e-01,  5.980836e-01),
    "BPMZ4D5R":   (1.198120e+00, -4.138794e-01),
    "BPMZ5D5R":   (1.508728e+00,  1.019074e+00),
    "BPMZ6D5R":  (-2.634278e-01,  5.680543e-01),
    "BPMZ7D5R":   (1.289673e-01,  7.442322e-01),
    "BPMZ1T5R":   (3.658448e-01,  2.786560e-01),
    "BPMZ2T5R":   (2.992554e-01,  8.110658e-01),
    "BPMZ3T5R":  (-2.423096e-02,  9.699098e-01),
    "BPMZ4T5R":   (7.012940e-02,  4.854126e-01),
    "BPMZ5T5R":   (4.101563e-01,  1.472839e+00),
    "BPMZ6T5R":   (3.638001e-01,  5.737916e-01),
    "BPMZ7T5R":  (-1.661987e-01,  4.782105e-02),
    "BPMZ1D6R":  (-3.457032e-01,  2.858887e-01),
    "BPMZ2D6R":  (-2.120972e-01,  4.269104e-01),
    "BPMZ3D6R":   (6.620789e-01, -3.117981e-01),
    "BPMZ4D6R":  (-1.999146e+00, -2.272949e-01),
    "BPMZ41D6R": (-3.228760e-02,  1.174927e-02),
    "BPMZ42D6R": (-6.603089e-01,  2.397766e-01),
    "BPMZ43D6R": (-5.000611e-01, -1.469727e-01),
    "BPMZ44D6R":  (1.234650e+00,  2.380371e-02),
    "BPMZ6D6R":  (-2.841126e+00, -1.057678e+00),
    "BPMZ7D6R":  (-7.184754e-01, -2.219544e-01),
    "BPMZ1T6R":   (6.591798e-02, -8.316041e-02),
    "BPMZ2T6R":  (-3.171082e-01,  1.875611e-01),
    "BPMZ3T6R":   (1.168518e-01, -1.887512e-01),
    "BPMZ4T6R":  (-6.317139e-03,  4.818726e-02),
    "BPMZ5T6R":  (-7.608033e-02,  2.179871e-01),
    "BPMZ6T6R":  (-1.220703e-03,  2.339173e-01),
    "BPMZ7T6R":  (-2.859497e-01,  2.878113e-01),
    "BPMZ1D7R":  (-1.840515e-01,  2.254639e-01),
    "BPMZ2D7R":   (8.889771e-02,  5.613404e-01),
    "BPMZ3D7R":   (4.471436e-01, -1.090393e-01),
    "BPMZ4D7R":  (-1.857300e-01,  8.807374e-02),
    "BPMZ5D7R":   (1.996765e-01,  9.813844e-01),
    "BPMZ6D7R":  (-5.879212e-01,  6.875916e-01),
    "BPMZ7D7R":   (7.690430e-03, -5.588074e-01),
    "BPMZ1T7R":   (3.641053e-01,  3.431702e-01),
    "BPMZ2T7R":  (-4.783631e-01,  4.029236e-01),
    "BPMZ3T7R":   (3.749695e-01, -5.789490e-01),
    "BPMZ4T7R":  (-1.642151e-01,  2.694702e-01),
    "BPMZ5T7R":  (-6.607056e-02,  3.268433e-02),
    "BPMZ6T7R":  (-8.050538e-01, -3.223267e-01),
    "BPMZ7T7R":   (1.220398e-01, -3.091431e-01),
    "BPMZ1D8R":   (2.545166e-01,  3.302002e-01),
    "BPMZ2D8R":   (1.212769e-01,  5.897217e-01),
    "BPMZ3D8R":   (8.132935e-02,  4.565430e-01),
    "BPMZ4D8R":  (-1.436768e-01,  2.376709e-01),
    "BPMZ5D8R":  (-4.596253e-01,  8.605958e-03),
    "BPMZ6D8R":  (-1.896057e-01, -2.800598e-01),
    "BPMZ7D8R":   (1.693421e-01,  3.395996e-01),
    "BPMZ1T8R":   (3.254090e-01, -2.508240e-01),
    "BPMZ2T8R":  (-2.835083e-01,  5.869141e-01),
    "BPMZ3T8R":   (3.128357e-01, -4.053345e-01),
    "BPMZ4T8R":  (-2.307129e-01,  8.888551e-01),
    "BPMZ5T8R":   (1.965332e-02,  8.676148e-02),
    "BPMZ6T8R":   (2.188111e-02, -7.896729e-01),
    "BPMZ7T8R":  (-1.533508e-01, -1.950684e-01),
    "BPMZ1D1R":  (-5.117798e-02,  5.253907e-01),
    "BPMZ2D1R":   (4.290772e-02, -6.027222e-02),
    "BPMZ3D1R":  (-2.517700e-02, -6.084290e-01),
    "BPMZ4D1R":  (-2.322388e-02, -6.217347e-01),
}

#: Translation of status
#: the bits
#: typically a correctly working bpm should report
#: 3
bpmbits = [
    #: AGC ... Automatic gain control
    #: if not set the bpm is in saturation
    (0, "AGC", "AGC"),
    #: bpm is powered
    (1, "Pwr", "Power"),
    #: unused since 20 years
    (2, "STmode", "Single Turn Mode"),
    #: The bits further down require to be documented
    (3, "DiagMode", "Diag. Mode"),
    (4, "ADRA0", "ADR A0"),
    (5, "ADRA1", "ADR A1"),
    (6, "CS", "CS Select"),
    (7, "Live", "Live Bit"),
]
